!function(b,h){b.fn.yith_wcbk_people_selector=function(n){var t=this,l=b(this),a=!1,s="",e=!1,o=function(){b(h).on("click",u),b(h).on("click","."+n["class"],function(e){e.stopPropagation()});var e=b(".yith_wcbk_booking_product_form_widget"),o=l.attr("id"),o=!!o&&b('label[for="'+o+'"]');e.on("click",u),e.on("click","."+n["class"],function(e){e.stopPropagation()}),l.on("click",n.openHandler_selector,_),l.on("click",n.closeHandler_selector,u),l.on("click",n.toggleHandler_selector,d),l.on("open",_),l.on("close",u),a.on("change",p),o&&o.length&&o.on("click",d)},c=function(){var e=l.data("min"),o=l.data("max");t.min=void 0!==e&&parseInt(e),t.max=void 0!==o&&parseInt(o)},i=function(){s=l.find(n.totals_selector)||"",e=l.find(n.fieldsContainer_selector)||"",a=l.find(n.field_selector)||!1,r(),a&&a.each(function(){b(this).yith_wcbk_people_selector_field({canIncreaseGlobal:function(){return!1===t.max||t.value<t.max},canDecreaseGlobal:function(){return!1===t.min||t.value>t.min},onUpdate:function(){a.trigger("enableDisableButtons")}})})},r=function(){var e=0;a&&a.each(function(){e+=parseInt(b(this).yith_wcbk_people_selector_field("getValue"))}),t.value=e},p=function(e){var o=e||!0;r(),e=1<t.value?n.plural_label.replace("%s",t.value.toString()):1===t.value?n.singular_label:n.zero_label,s.text(e),o&&l.trigger("change")},_=function(){l.removeClass(n.closed_class).addClass(n.opened_class),e&&e.show(),n.onOpen()},u=function(){l.removeClass(n.opened_class).addClass(n.closed_class),e&&e.hide(),n.onClose()},d=function(e){"object"==typeof e&&"undefined"!=typeof e.stopPropagation&&e.stopPropagation(),(l.hasClass(n.opened_class)?u:_)()},f={zero_label:yith_people_selector_params.i18n_zero_person,singular_label:yith_people_selector_params.i18n_one_person,plural_label:yith_people_selector_params.i18n_more_persons,"class":"yith-wcbk-people-selector",totals_selector:".yith-wcbk-people-selector__totals",closeHandler_selector:".yith-wcbk-people-selector__close-handler",openHandler_selector:".yith-wcbk-people-selector__open-handler",toggleHandler_selector:".yith-wcbk-people-selector__toggle-handler",fieldsContainer_selector:".yith-wcbk-people-selector__fields-container",field_selector:".yith-wcbk-people-selector__field",opened_class:"yith-wcbk-people-selector--opened",closed_class:"yith-wcbk-people-selector--closed",onOpen:function(){},onClose:function(){}};return n=b.extend({},f,n),t.val=function(){return t.value},t.value=0,c(),i(),o(),p(!1),u(),l},b.fn.yith_wcbk_people_selector_field=function(e){var n=this,t=b(this),l=!1,a=!1,o=!1,s=!1,c=function(){l=t.find(n.options.value_selector)||!1,a=t.find(n.options.total_selector)||!1,o=t.find(n.options.plus_selector)||!1,s=t.find(n.options.minus_selector)||!1},i=function(){t.on("click",n.options.plus_selector,function(){n.canIncrease()&&d()}),t.on("click",n.options.minus_selector,function(){n.canDecrease()&&u()}),t.on("enableDisableButtons",n.enableDisableButtons)},r=function(){var e=t.data("min"),o=t.data("max");n.min=void 0!==e&&parseInt(e),n.max=void 0!==o&&parseInt(o)},p=function(e,o){l&&void 0!==e&&(e=e,!1!==n.min&&(e=Math.max(n.min,parseInt(e))),!1!==n.max&&(e=Math.min(n.max,parseInt(e))),e=parseInt(e),l.val(e),t.data("value",e),o=void 0===(e=o)||e,e=_(),a&&a.text(e),l&&l.val(e),o&&l.trigger("change"),n.enableDisableButtons(),n.options.onUpdate())},_=function(){var e=0;return l&&(e=l.val()||0),parseInt(e)},u=function(e){var o=void 0===e||isNaN(e)?1:parseInt(e),e=_(),o=parseInt(o);p(e-o)},d=function(e){var o=void 0===e||isNaN(e)?1:parseInt(e),e=_(),o=parseInt(o);p(e+o)},f={value_selector:".yith-wcbk-people-selector__field__value",total_selector:".yith-wcbk-people-selector__field__total",plus_selector:".yith-wcbk-people-selector__field__plus",minus_selector:".yith-wcbk-people-selector__field__minus",buttonDisabledClass:"yith-wcbk-people-selector__field__button--disabled",canIncreaseGlobal:function(){return!0},canDecreaseGlobal:function(){return!0},onUpdate:function(){}};return n.canIncrease=function(){var e=!0;return!1!==n.max&&(e=_()<n.max),e&&n.options.canIncreaseGlobal()},n.canDecrease=function(){var e=!0;return!1!==n.min&&(e=_()>n.min),e&&n.options.canDecreaseGlobal()},n.enableDisableButtons=function(){n.canIncrease()?o.removeClass(n.options.buttonDisabledClass):o.addClass(n.options.buttonDisabledClass),n.canDecrease()?s.removeClass(n.options.buttonDisabledClass):s.addClass(n.options.buttonDisabledClass)},"getValue"===(e=void 0!==e?e:{})?t.data("value")||0:(n.options=b.extend({},f,e),r(),c(),i(),p(_(),!1),t)}}(jQuery,(window,document));